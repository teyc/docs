



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Documentation for SAFE">
      
      
        <link rel="canonical" href="http://safe-stack.github.io/docs/template-iis/">
      
      
        <meta name="author" content="SAFE Stack">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.6.0">
    
    
      
        <title>Deploy to IIS - SAFE Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.1b62728e.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.a8b3c06d.css">
      
      
        
        
        <meta name="theme-color" content="#fb8c00">
      
    
    
      <script src="../assets/javascripts/modernizr.268332fc.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="orange" data-md-color-accent="blue">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#deploy-to-iis" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="http://safe-stack.github.io/docs/" title="SAFE Documentation" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              SAFE Documentation
            </span>
            <span class="md-header-nav__topic">
              
                Deploy to IIS
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/SAFE-Stack/docs/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    SAFE-Stack/docs
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="http://safe-stack.github.io/docs/" title="SAFE Documentation" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    SAFE Documentation
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/SAFE-Stack/docs/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    SAFE-Stack/docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../intro/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../quickstart/" title="Quick Start" class="md-nav__link">
      Quick Start
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../overview/" title="SAFE Stack Overview" class="md-nav__link">
      SAFE Stack Overview
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Components of SAFE
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Components of SAFE
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../component-saturn/" title="Learn about Saturn" class="md-nav__link">
      Learn about Saturn
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../component-azure/" title="Learn about Azure" class="md-nav__link">
      Learn about Azure
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../component-fable/" title="Learn about Fable" class="md-nav__link">
      Learn about Fable
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../component-elmish/" title="Learn about Elmish" class="md-nav__link">
      Learn about Elmish
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6" checked>
    
    <label class="md-nav__link" for="nav-6">
      The SAFE Template
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        The SAFE Template
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../template-overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../template-fake/" title="Run and Build the app" class="md-nav__link">
      Run and Build the app
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-3" type="checkbox" id="nav-6-3" checked>
    
    <label class="md-nav__link" for="nav-6-3">
      Deployment Options
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-6-3">
        Deployment Options
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../template-docker/" title="Deploy to Docker" class="md-nav__link">
      Deploy to Docker
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../template-appservice/" title="Deploy to App Service" class="md-nav__link">
      Deploy to App Service
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../template-gcp-appengine/" title="Deploy to Google Cloud AppEngine" class="md-nav__link">
      Deploy to Google Cloud AppEngine
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../template-gcp-kubernetes/" title="Deploy to Google Cloud Kubernetes Engine" class="md-nav__link">
      Deploy to Google Cloud Kubernetes Engine
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../template-heroku/" title="Deploy to Heroku" class="md-nav__link">
      Deploy to Heroku
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
    <a href="./" title="Deploy to IIS" class="md-nav__link md-nav__link--active">
      Deploy to IIS
    </a>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../template-azure-ai/" title="Application Insights Integration" class="md-nav__link">
      Application Insights Integration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../template-azure-registration/" title="Registering with Azure" class="md-nav__link">
      Registering with Azure
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../template-google-cloud/" title="Registering with Google Cloud" class="md-nav__link">
      Registering with Google Cloud
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Features of SAFE
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Features of SAFE
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-1" type="checkbox" id="nav-7-1">
    
    <label class="md-nav__link" for="nav-7-1">
      Client / Server Sharing
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-1">
        Client / Server Sharing
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../feature-clientserver/" title="Sharing Overview" class="md-nav__link">
      Sharing Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../feature-clientserver-basics/" title="Sharing Types and Code" class="md-nav__link">
      Sharing Types and Code
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../feature-clientserver-http/" title="Messaging using HTTP" class="md-nav__link">
      Messaging using HTTP
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../feature-clientserver-remoting/" title="Messaging with Protocols" class="md-nav__link">
      Messaging with Protocols
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../feature-clientserver-bridge/" title="Stateful Messaging through Bridge" class="md-nav__link">
      Stateful Messaging through Bridge
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../feature-clientserver-serialization/" title="Serialization in SAFE" class="md-nav__link">
      Serialization in SAFE
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../feature-debugging/" title="Full Stack Debugging" class="md-nav__link">
      Full Stack Debugging
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../feature-ssr/" title="Server Side Rendering" class="md-nav__link">
      Server Side Rendering
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../feature-hmr/" title="Hot Module Replacement" class="md-nav__link">
      Hot Module Replacement
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../feature-azurefunctions/" title="Working with Azure functions" class="md-nav__link">
      Working with Azure functions
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      FAQs
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        FAQs
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../faq-server/" title="Choosing your web server" class="md-nav__link">
      Choosing your web server
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../faq-build/" title="Moving from dev to prod" class="md-nav__link">
      Moving from dev to prod
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../faq-troubleshooting/" title="Troubleshooting" class="md-nav__link">
      Troubleshooting
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../learning/" title="Learning Resources" class="md-nav__link">
      Learning Resources
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../news/" title="News" class="md-nav__link">
      News
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../events/" title="Events" class="md-nav__link">
      Events
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../support/" title="Support" class="md-nav__link">
      Support
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../testimonials/" title="Testimonials" class="md-nav__link">
      Testimonials
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/SAFE-Stack/docs/edit/master/docs/template-iis.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="deploy-to-iis">Deploy to IIS</h1>
<p>The SAFE template can be easily deployed to <a href="https://www.iis.net/">IIS</a>, either on-premise or on a hosted virtual machine running Windows. To get started, scaffold the template with the deploy option set to IIS:</p>
<pre><code class="bash">dotnet new SAFE --deploy iis
</code></pre>

<p>The template will include a custom FAKE build target called <code>Bundle</code> to package your application and make it ready for deployment, run this target using:</p>
<pre><code>fake build --target bundle
</code></pre>

<p>When the target finishes running succesfully, you will have a new <code>deploy</code> directory with this structure:</p>
<pre><code>{template root}
 |
 | - deploy
       | - Client
       | - Server 
</code></pre>

<p>Your app is now ready for deployment. </p>
<h1 id="setting-up-iis">Setting up IIS</h1>
<h3 id="create-an-application-pool">Create an Application Pool</h3>
<p>Hosting dotnet core on IIS does not support Application Pool sharing which means every dotnet application has it's own application pool, create a new one, give it the name of the application, for example <code>SafeApp</code> and make sure to set the .NET CLR version to <code>No Managed Code</code>: </p>
<p><img alt="" src="../img/deploy-iis-2.png" /></p>
<h3 id="required-iis-modules">Required IIS Modules:</h3>
<ul>
<li>ASP.NET Core module for Giraffe and Saturn</li>
<li>HttpPlatformHandler for Suave</li>
</ul>
<h3 id="aspnet-core-module">ASP.NET Core module</h3>
<p>Like with any dotnet core app hosted within IIS, you will need to have the <code>AspNetCoreModule</code> installed in IIS<sup>*</sup>. This is a native module that starts your dotnet app in a child process of IIS and proxies all http requests coming from IIS to the application.</p>
<p><img alt="" src="../img/deploy-iis-1.png" /></p>
<blockquote>
<p>Note that for netcoreapp2.2, you will need AspNetCoreModule and <em>not</em> AspNetCoreModuleV2.</p>
</blockquote>
<h3 id="httpplatformhandler-applies-to-suave">HttpPlatformHandler (applies to Suave)</h3>
<p>Because Suave does not run on Kestrel, it does not use built-in IIS integration from ASP.NET Core, and therefore, Suave will use the generic <a href="https://www.iis.net/downloads/microsoft/httpplatformhandler">HttpPlatformHandler</a> module in IIS. Make sure you have the module installed on your IIS server:</p>
<p><img alt="" src="../img/deploy-iis-5.png" /></p>
<p>There is a catch when using Suave and HttpPlatformHandler: you cannot create sub-applications within an IIS <em>website</em> (root level application) because the virtual paths will break how the routing works in Suave, meaning that you have to add a new <em>website</em> for a Suave application. </p>
<p>Another thing to considor when deploying Suave, is that you have to change a part your <code>web.config</code> manually, from this:</p>
<pre><code class="xml">&lt;httpPlatform 
      stdoutLogEnabled=&quot;true&quot; 
      stdoutLogFile=&quot;suave.log&quot; 
      startupTimeLimit=&quot;20&quot; 
      processPath=&quot;dotnet&quot; 
      arguments=&quot;./Server&quot; /&gt;
</code></pre>

<p>to this:</p>
<pre><code class="xml">&lt;httpPlatform 
      stdoutLogEnabled=&quot;true&quot; 
      stdoutLogFile=&quot;suave.log&quot; 
      startupTimeLimit=&quot;20&quot; 
      processPath=&quot;dotnet&quot; 
      arguments=&quot;C:\full\path\to\deployed\Server.dll&quot; /&gt;
</code></pre>

<p>because otherwise the HttpPlatformHandler will not be able to figure out where the application exactly is. </p>
<h3 id="add-application-applies-to-giraffe-and-saturn">Add Application (applies to Giraffe and Saturn)</h3>
<p>Now that the application pool is setup, we can our application to it. When Adding an application, you give it an ailias, and a physical path. In our case, because this is the only application in the application pool, lets just name it <code>SafeApp</code> and the physical path of the application is the <em>Server</em> directory of the bundled deployment directory:</p>
<pre><code class="bash">{template root}
 |
 | - deploy
       | - Client
       | - Server &lt;--- the physical path
</code></pre>

<p>Here I am adding the application to the default (root) website of IIS </p>
<p><img alt="" src="../img/deploy-iis-3.png" /> </p>
<p>Now your application should be up and running!</p>
<p><img alt="" src="../img/deploy-iis-4.png" /></p>
<h3 id="add-website-applies-to-suave">Add Website (applies to Suave)</h3>
<p>Adding a website is the same as adding a sub-application, using a single application pool and having the physical path of the application be the <em>Server</em> directory of the bundled deployment directory:</p>
<pre><code class="bash">{template root}
 |
 | - deploy
       | - Client
       | - Server &lt;--- the physical path
</code></pre>

<p>but the difference is that now you have choose a different port for the application:</p>
<p><img alt="" src="../img/deploy-iis-6.png" /></p>
<p>for this example, I have chosen to run the application on port <code>8090</code> and <code>web.config</code> looks like this:</p>
<pre><code class="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;configuration&gt;
  &lt;system.webServer&gt;
    &lt;handlers&gt;
      &lt;remove name=&quot;httpplatformhandler&quot; /&gt;
      &lt;add name=&quot;httpplatformhandler&quot; path=&quot;*&quot; verb=&quot;*&quot; modules=&quot;httpPlatformHandler&quot; resourceType=&quot;Unspecified&quot; /&gt;
    &lt;/handlers&gt;
    &lt;httpPlatform stdoutLogEnabled=&quot;true&quot; stdoutLogFile=&quot;suave.log&quot; startupTimeLimit=&quot;20&quot; processPath=&quot;dotnet&quot; arguments=&quot;C:\projects\SafeApp\deploy\Server\Server.dll&quot; /&gt;
  &lt;/system.webServer&gt;
&lt;/configuration&gt;
</code></pre>

<p>Notice how I am using the full path of the compiled <code>Server.dll</code> from my deployment directory. </p>
<p>Now click <code>OK</code> and your Suave app should be up and running:</p>
<p><img alt="" src="../img/deploy-iis-7.png" /></p>
<h3 id="deploying-a-new-version">Deploying a new version</h3>
<ul>
<li>Stop the application pool</li>
<li>Replace the contents of the deployment directory </li>
<li>Restart/Recycle the application pool</li>
</ul>
<h3 id="client-developement-considorations-applies-to-giraffe-and-saturn">Client developement considorations (applies to Giraffe and Saturn)</h3>
<p>When hosting inside IIS, your application will most likely run inside a virtual path like in the above example. This means that requests made using fetch will not work by default:</p>
<pre><code class="fs">// will not work
fetchAs&lt;Customer list&gt; &quot;/api/customers&quot; 
</code></pre>

<p>To solve this, the template includes a module <code>ServerPath</code> with a function to normalize the routes, so instead of the above you would have:</p>
<pre><code class="fs">// this works
fetchAs&lt;Customer list&gt; (ServerPath.normalize &quot;/api/customers&quot;)
</code></pre>

<p>You will have to this for every request you make, unless you are using remoting which is done only once during proxy setup. </p>
<p>Be careful not to forget <code>ServerPath.normalize</code>, because if you forget it during developement, the route still works because there is no IIS but then when you deploy the app, the route won't work any more because of the virtual paths.</p>
                
                  
                
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        

<!-- Application footer -->
<footer class="md-footer">

  <!-- Link to previous and/or next page -->
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">

        <!-- Link to previous page -->
        
          <a href="/docs/template-heroku/"
              title="Deploy to Heroku"
              class="md-flex md-footer-nav__link md-footer-nav__link--prev"
              rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back
                    md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch
                  md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Deploy to Heroku
              </span>
            </div>
          </a>
        

        <!-- Link to next page -->
        
          <a href="/docs/template-azure-ai/" title="Application Insights Integration"
              class="md-flex md-footer-nav__link md-footer-nav__link--next"
              rel="next">
            <div class="md-flex__cell md-flex__cell--stretch
                  md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Application Insights Integration
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward
                    md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  

  <!-- Further information -->
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">

      <!-- Copyright and theme information -->
      <div class="md-footer-copyright">
        Supported by
        <a href="http://lambdafactory.io">
            λFactory</a>
        and
        <a href="https://compositional-it.com/">
          Compositional IT</a>
      </div>

      <!-- Social links -->
      
        
  <div class="md-footer-social">
    <link rel="stylesheet" href="../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/SAFE-Stack" class="md-footer-social__link fa fa-github"></a>
    
      <a href="https://twitter.com/safe_stack" class="md-footer-social__link fa fa-twitter"></a>
    
      <a href="https://safe-stack.github.io/" class="md-footer-social__link fa fa-globe"></a>
    
  </div>

      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.808e90bb.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
    
  </body>
</html>